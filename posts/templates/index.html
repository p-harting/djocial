{% extends "base.html" %}

{% block content %}

{% if user.is_authenticated %}

<div class="post-form-container">
  <form method="post" action="{% url 'create_post' %}" class="post-form">
    {% csrf_token %}
    <div class="mb-3">
      <textarea id="postContent" name="content" class="form-control" rows="4" placeholder="What's new..."
        required></textarea>
    </div>
    <button type="submit" class="btn-primary">Submit</button>
  </form>
</div>

<hr>
{% endif %}

{% for post in posts %}
<div>
  <p><strong>Author:</strong>
    <a href="{% url 'account' pk=post.author.pk %}">
      {{ post.author }}
    </a>
    | <strong>Date:</strong> {{ post.created_on|date:"d M Y H:i" }}</p>
  <!--
      {% if post.image %}
        <img src="{{ post.image.url }}" alt="{{ post.title }}" style="max-width: 100%; height: auto;">
      {% endif %}
      -->
  <p>{{ post.content|safe|linebreaks }}</p>
  <a href="{% url 'post_detail' post.slug %}">
    <div>View post</div>
  </a>
</div>
<hr>
{% empty %}
<p>Nothing posted yet.</p>
{% endfor %}
{% endblock %}